<!doctype html>
<html>
<head>
    <script src="https://cdn.socket.io/socket.io-1.4.5.js"></script>
    <script src="https://code.jquery.com/jquery-1.12.2.min.js" integrity="sha256-lZFHibXzMHo3GGeehn1hudTAP3Sc0uKXBXAzHX1sjtk=" crossorigin="anonymous"></script>
    <script>
        $(document).ready(function() {
            var socket = io();

            $('#getshit').on('keyup',function(e){
                socket.emit('keycode', [e.keyCode,(new Date()).getTime()]);
            });
            socket.on('keyfetch', function (data) {
                addMessage(data[0]+' '+((new Date()).getTime()-data[1]));
            });
            socket.on('error', console.error.bind(console));
            socket.on('message', console.log.bind(console));

            function addMessage(message) {
                var text = document.createTextNode(message),
                        el = document.createElement('li'),
                        messages = document.getElementById('messages');

                el.appendChild(text);
                messages.appendChild(el);
            }
        });
    </script>
</head>
<body>
<input id="getshit" />
<ul id='messages'></ul>
</body>
</html>